1. 数据库两次入库改为先记入缓存，再一次入库，入库改为放到队列中
2. 所有同步代码改为异步调用，增加并发能力
3. Domain模块，new初始化改为依赖注入为单例
4. Nginx配置Http转发为长连接
5. 优化反射性能：拦截规则反射改为表达式树方式
6. 图片功能：对图片进行压缩、配置nginx静态缓存、增加图片服务器



### 秒杀系统设计

前端：

- 增加CDN服务器，减轻秒杀服务器压力
- URL动态化，需要前端获取请求真实地址
- 前端限流，秒杀前按钮不可点击，秒杀中点击后需过几秒才可继续点击

后端：

- 增加服务节点，通过nginx负载均衡
- 恶意请求拦截
- 风控，分析用户是机器还是人操作
- 微服务架构，秒杀系统崩溃不会影响其他业务
- Redis集群、Redis事务、锁
- MQ，削峰填谷
- 分布式事务，两段提交、三段提交

https://zhuanlan.zhihu.com/p/169464555

### ZoolKeeper



### ELK